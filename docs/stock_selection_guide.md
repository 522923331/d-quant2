# 智能选股系统使用指南

## 功能概述

d-quant2 智能选股系统提供了强大的多维度股票筛选功能，支持：

- 📊 **技术指标筛选** - MACD、KDJ、RSI、CCI、布林带等
- 📈 **均线分析** - SMA、EMA、WMA多种均线
- 💰 **价格与成交量** - 价格区间、换手率、成交量放大
- 📉 **基本面指标** - 市盈率、市净率、ROE、净利率(可选)
- 📑 **财务指标** - 毛利率、营业利润率、流动比率等(可选)

## 快速开始

### 1. 安装依赖

```bash
cd d-quant2
pip install -r requirements.txt
```

确保安装了 `baostock` 数据源。

### 2. 启动Web界面

```bash
streamlit run app.py
```

访问 http://localhost:8501

### 3. 选择功能

在左侧边栏选择"🔍 智能选股"

## 使用步骤

### 1. 基本设置

- **市场选择**: 上证(sh) 或 深证(sz)
- **数量上限**: 设置要筛选的股票数量(1-100只)

### 2. 配置技术指标

勾选需要的技术指标条件:

| 指标 | 说明 | 默认 |
|------|------|------|
| MACD金叉 | MACD线向上穿过信号线 | ✓ |
| KDJ可买入 | K>D 且 J<30 | ✓ |
| RSI超卖 | RSI < 30 | ✓ |
| CCI超卖 | CCI < -100 | ✓ |
| 价格>加权均线 | 收盘价高于WMA | ✓ |
| 价格>指数均线 | 收盘价高于EMA | ✓ |
| 价格>简单均线 | 收盘价高于SMA | ✓ |
| 成交量放大 | 当日成交量>5日均量1.5倍 | ✓ |
| 布林带下轨 | 价格接近或低于布林下轨 | ✓ |

### 3. 价格与换手率

- **价格区间**: 设置股价范围(默认5-40元)
- **换手率**: 设置换手率范围(默认3%-12%)

### 4. 基本面指标(可选)

展开"📊 基本面指标"面板，可选择:

- 市盈率 < 20
- 市净率 < 2  
- ROE > 15%
- 净利率 > 10%

### 5. 开始选股

点击"🚀 开始选股"按钮，系统将:

1. 连接证券数据中心
2. 加载股票列表
3. 逐个检查股票条件
4. 显示实时进度
5. 展示筛选结果

## 结果分析

### 结果表格

显示符合条件的股票：

- 股票代码
- 股票名称
- 最新价格
- 数据日期

### 详细条件

展开"📋 查看详细筛选条件"可查看每只股票各指标的通过情况。

### 导出结果

点击"📥 下载选股结果 (CSV)"导出筛选结果为CSV文件。

## 筛选策略建议

### 保守型策略

适合稳健投资者，减少筛选条件：

- ✓ MACD金叉
- ✓ 价格>均线
- ✓ 价格区间
- ✓ 基本面指标(市盈率、市净率)

### 激进型策略

适合波段操作，多重条件叠加：

- ✓ MACD + KDJ + RSI
- ✓ 成交量放大
- ✓ 布林带下轨
- ✓ 换手率适中

### 价值投资策略

关注基本面：

- ✓ 市盈率 < 20
- ✓ 市净率 < 2
- ✓ ROE > 15%
- ✓ 毛利率 > 30%
- ✓ 价格稳定

## 注意事项

1. **数据时效性**: 使用baostock实时数据，受网络影响
2. **筛选时间**: 根据股票数量和网络状况，可能需要几分钟
3. **条件组合**: 条件越多，符合的股票越少
4. **风险提示**: 筛选结果仅供参考，投资需谨慎

## 技术参数调整

可在配置类中调整技术指标参数:

```python
# dquant2/stock/config.py
bollinger_period: int = 15  # 布林带周期
bollinger_std_dev: float = 1.5  # 标准差倍数
rsi_period: int = 14  # RSI周期
kdj_period: int = 9  # KDJ周期
...
```

## 常见问题

### Q: 筛选速度慢怎么办?

A: 
- 减少筛选数量上限
- 减少启用的指标条件
- 检查网络连接

### Q: 没有找到符合条件的股票?

A:
- 放宽筛选条件
- 减少必选指标
- 调整价格区间

### Q: 如何停止正在运行的筛选?

A: 刷新浏览器页面即可中断

## 下一步

- 查看[回测分析](../README.md#回测分析)功能
- 了解[策略开发](../docs/strategy_development.md)
- 贡献新的筛选指标
